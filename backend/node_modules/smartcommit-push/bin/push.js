#!/usr/bin/env node

require("dotenv").config();
const readline = require("readline");
const { autoPush } = require("../git-wrapper");

(async () => {
  try {
    const rl = readline.createInterface({
      input: process.stdin,
      output: process.stdout
    });

    rl.question(
      "Enter branch name (leave empty for current branch): ",
      (branch) => {
        try {
          autoPush(branch.trim() || undefined);
          console.log("ğŸš€ Code pushed successfully!");
        } catch (err) {
          console.error("âŒ Push failed:", err.message);
        }
        rl.close();
      }
    );
  } catch (err) {
    console.error("âŒ Error:", err.message);
  }
})();
